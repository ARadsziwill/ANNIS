<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.3.1"/>
<title>ANNIS: Configure front-end web-application</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectlogo"><img alt="Logo" src="annis_64.png"/></td>
  <td style="padding-left: 0.5em;">
   <div id="projectname">ANNIS
   &#160;<span id="projectnumber">3.0.0-rc.1</span>
   </div>
   <div id="projectbrief">An open source, versatile web browser-based search and visualization architecture for complex multilevel linguistic corpora with diverse types of annotation.</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.3.1 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="namespaces.html"><span>Packages</span></a></li>
      <li><a href="annotated.html"><span>Classes</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('admin-configure-webapp.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Classes</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Namespaces</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">Configure front-end web-application </div>  </div>
</div><!--header-->
<div class="contents">
<div class="toc"><h3>Table of Contents</h3>
<ul><ul><li class="level2"><a href="#admin-configure-container">Configuring Tomcat or Jetty as application container </a><ul><li class="level3"><a href="#admin-configure-tomcat-utf8">Tomcat: UTF8 encoding in server.xml</a></li>
</ul>
</li>
<li class="level2"><a href="#admin-configure-general">General configuration advices </a></li>
<li class="level2"><a href="#admin-configure-instance">Create and configure instances </a></li>
<li class="level2"><a href="#admin-configure-vis">Configuring Visualizations </a><ul><li class="level3"><a href="#admin-configure-visibility">Visibility column</a></li>
<li class="level3"><a href="#admin-configure-vislist">Visualizer list</a></li>
</ul>
</li>
</ul>
</ul>
</div>
<div class="textblock"><p>We are providing a WAR-file that is deployable by every common Java Servlet Container like Tomcat or Jetty. Please use the documentation of the web application container of your choice how to deploy these war-files.</p>
<p>If using Tomcat make sure the UTF-8 encoding is used for URLs. Some installations of Tomcat don't use UTF-8 for the encoding of the URLs and that will cause problems when searching for non-ASCII characters. In order to avoid this the Connector-configuration needs the property "URIEncoding" set to "UTF-8" like in this example (<code>$CATALINA_HOME/server.xml</code>):</p>
<div class="fragment"><div class="line">&lt;Connector port=<span class="stringliteral">&quot;8080&quot;</span> protocol=<span class="stringliteral">&quot;HTTP/1.1&quot;</span></div>
<div class="line">connectionTimeout=<span class="stringliteral">&quot;20000&quot;</span></div>
<div class="line">URIEncoding=<span class="stringliteral">&quot;UTF-8&quot;</span></div>
<div class="line">redirectPort=<span class="stringliteral">&quot;8443&quot;</span></div>
<div class="line">executor=<span class="stringliteral">&quot;tomcatThreadPool&quot;</span> /&gt;</div>
</div><!-- fragment --><p>The ANNIS frontend will search in different folders for it's configuration.</p>
<table class="doxtable">
<tr>
<th>Folder </th><th>Description</th></tr>
<tr>
<td><code>&lt;Installation&gt;/WEB-INF/conf/</code> </td><td>Default configuration inside the deployed web application folder. Should not be changed. </td></tr>
<tr>
<td><code>$ANNIS_CFG</code> or <code>/etc/annis/</code> </td><td>The global configuration folder defined by the environment variable <code>ANNIS_CFG</code> or a default path if not set. </td></tr>
<tr>
<td><code>~/.annis/</code> </td><td>User specific configuration inside the <code>.annis</code> sub-folder inside the user's home folder </td></tr>
</table>
<p>Configuration files can be either in the <a href="http://en.wikipedia.org/w/index.php?title=.properties&amp;oldid=521500688">Java Properties</a> or <a href="http://www.json.org/">JSON</a> format. Configuration files from the user directory can overwrite the global configuration and the global configuration overwrites the default configuration.</p>
<p>When multiple corpora from different sources are hosted on one server it is often still desired to group the corpora by their origin and present them differently. You should not be forced to have an ANNIS frontend and service installation for each of this groups. Instead the administrator can define so called instances.</p>
<p>An instance is defined by a JSON file inside the instances sub-folder in one of the configuration locations. The name of the file also defines the instance name. Thus the file <code>instances/falko.json</code> defines the instance named "falko".</p>
<div class="fragment"><div class="line">{</div>
<div class="line">    <span class="stringliteral">&quot;display-name&quot;</span>: <span class="stringliteral">&quot;Falko&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;default-querybuilder&quot;</span>: <span class="stringliteral">&quot;tigersearch&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;default-corpusset&quot;</span>: <span class="stringliteral">&quot;falko-essays&quot;</span>,</div>
<div class="line">    <span class="stringliteral">&quot;corpus-sets&quot;</span>: [</div>
<div class="line">        {</div>
<div class="line">            <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;falko-essays&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;corpus&quot;</span>: [</div>
<div class="line">                <span class="stringliteral">&quot;falko-essay-l1&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;falko-essay-l2&quot;</span></div>
<div class="line">            ]</div>
<div class="line">        },</div>
<div class="line">        {</div>
<div class="line">            <span class="stringliteral">&quot;name&quot;</span>: <span class="stringliteral">&quot;falko-summaries&quot;</span>,</div>
<div class="line">            <span class="stringliteral">&quot;corpus&quot;</span>: [</div>
<div class="line">                <span class="stringliteral">&quot;falko-summary-l1&quot;</span>,</div>
<div class="line">                <span class="stringliteral">&quot;falko-summary-l2&quot;</span></div>
<div class="line">            ]</div>
<div class="line">        }</div>
<div class="line">    ]</div>
<div class="line">}</div>
</div><!-- fragment --><p>Each instance configuration can have a verbose display-name which is displayed in the title of the browser window. <code>default-querybuilder</code> defines the short name of the query builder you want to use. Currently only "tigersearch" is available, see <a class="el" href="dev-querybuilder.html">here</a> if you want to add your own query builder.</p>
<p>While any user can group corpora into corpus sets for their own, you can define corpus sets for the whole instance. Each corpus set is an JSON-object with a name and a list of corpora that belong to the corpus set.</p>
<p>Any defined instance is assigned a special URL at which it can be accessed: <code><a href="http://">http://</a>&lt;server&gt;/annis-gui/&lt;instance-name&gt;</code>. The default instance is additionally accessible by not specifying any instance name in the URL. You can configure your web server (e.g. Apache) to rewrite the URLs if you need a more project specific and less "technical" URL (e.g. <code><a href="http://">http://</a>&lt;server&gt;/falko</code>).</p>
<p>By default, ANNIS displays all search results in the Key Word in Context (KWIC) view in the search result window. Further visualizations, such as syntax trees or grid views, are displayed by default based on the following namespaces:</p>
<table class="doxtable">
<tr>
<th>Namespace</th><th>visualizer</th></tr>
<tr>
<td>tiger </td><td><a class="el" href="classannis_1_1visualizers_1_1component_1_1tree_1_1TigerTreeVisualizer.html">tree visualizer</a> </td></tr>
<tr>
<td>exmaralda </td><td><a class="el" href="classannis_1_1visualizers_1_1component_1_1grid_1_1GridVisualizer.html">grid visualizer</a> </td></tr>
<tr>
<td>mmax </td><td><a class="el" href="classannis_1_1visualizers_1_1iframe_1_1CorefVisualizer.html">discourse view</a> </td></tr>
<tr>
<td>video </td><td><a class="el" href="classannis_1_1visualizers_1_1component_1_1VideoVisualizer.html">video player</a> </td></tr>
<tr>
<td>audio </td><td><a class="el" href="classannis_1_1visualizers_1_1component_1_1AudioVisualizer.html">audio player</a> </td></tr>
</table>
<p>In these cases the namespaces are usually taken from the source format in which the corpus was generated, and carried over into relAnnis during the conversion. It is also possible to use other namespaces, most easily when working with PAULA XML. In PAULA XML, the namespace is determined by the string prefix before the first period in the file name / paula_id of each annotation layer. In order to manually determine the visualizer and the display name for each namespace in each corpus, the resolver table (<code>resolver_vis_map</code>) in the database must be edited.</p>
<p>The columns in the table can be filled out as follows: </p>
<table class="doxtable">
<tr>
<th>Column </th><th>Description</th></tr>
<tr>
<td>corpus </td><td>determines the corpora for which the instruction is valid (null values apply to all corpora) </td></tr>
<tr>
<td>namespace </td><td>pecifies relevant namespace which triggers the visualization </td></tr>
<tr>
<td>element </td><td>determines if a <code>node</code> or an <code>edge</code> should carry the relevant annotation for triggering the visualization </td></tr>
<tr>
<td>vis_type </td><td>determines the visualizer module used from the short name of the visualizer, valid values for the ANNIS standard installation can be found in <a class="el" href="admin-configure-webapp.html#admin-configure-vislist">Visualizer list</a> </td></tr>
<tr>
<td>display_name </td><td>determines the heading that is shown for each visualizer in the interface </td></tr>
<tr>
<td>visibility </td><td>determines the visibility state of the visualizer. Valid values are explained in <a class="el" href="admin-configure-webapp.html#admin-configure-visibility">Visibility column</a> </td></tr>
<tr>
<td>order </td><td>determines the order in which visualizers are rendered in the interface (low to high) </td></tr>
<tr>
<td>mappings </td><td>provides additional parameters for some visualizations, see the specific visualizer documentation for valid values </td></tr>
</table>
<p>These are the valid values for the <code>visibility</code> column in the <code>resolver_vis_map</code> table</p>
<ul>
<li><code>permanent</code> - the visualizer is shown and not closeable</li>
<li><code>hidden</code> - the visualizer is hidden, but expandable</li>
<li><code>visible</code> - the visualizer is visible and closeable</li>
<li><code>preloaded</code> - behaviour is the same as <code>hidden</code>, but the visualizer starts to be rendered in the background</li>
<li><code>removed</code> - this visualizer is disabled, useful to deactivate a visualizer that is always shown (like <a class="el" href="classannis_1_1visualizers_1_1component_1_1KWICPanel.html">KWIC</a></li>
</ul>
<table class="doxtable">
<tr>
<th>short name</th><th>Description </th><th>Java class </th><th>Screenshot</th></tr>
<tr>
<td><code>tree</code> </td><td>constituent syntax tree </td><td><a class="el" href="classannis_1_1visualizers_1_1component_1_1tree_1_1TigerTreeVisualizer.html">TigerTreeVisualizer</a> </td><td><div class="image">
<img src="tiger_tree_vis.png" alt="tiger_tree_vis.png"/>
<div class="caption">
tree</div></div>
</td></tr>
<tr>
<td><code>grid</code> </td><td>annotation grid, with annotations spanning multiple tokens </td><td><a class="el" href="classannis_1_1visualizers_1_1component_1_1grid_1_1GridVisualizer.html">GridVisualizer</a> </td><td><div class="image">
<img src="grid_vis.png" alt="grid_vis.png"/>
<div class="caption">
grid</div></div>
</td></tr>
<tr>
<td><code>grid_tree</code> </td><td>a grid visualizing hierarchical tree annotations as ordered grid layers </td><td><a class="el" href="classannis_1_1visualizers_1_1iframe_1_1gridtree_1_1GridTreeVisualizer.html">GridTreeVisualizer</a> </td><td><div class="image">
<img src="grid_tree_vis.png" alt="grid_tree_vis.png"/>
<div class="caption">
grid_tree</div></div>
</td></tr>
<tr>
<td><code>discourse</code> </td><td>a view of the entire text of a document, possibly with interactivecoreference links. </td><td><a class="el" href="classannis_1_1visualizers_1_1iframe_1_1CorefVisualizer.html">CorefVisualizer</a> </td><td><div class="image">
<img src="discourse_vis.png" alt="discourse_vis.png"/>
<div class="caption">
discourse</div></div>
</td></tr>
<tr>
<td><code>arch_dependency</code> </td><td>dependency tree with labeled arches between tokens </td><td><a class="el" href="classannis_1_1visualizers_1_1iframe_1_1dependency_1_1VakyarthaDependencyTree.html">VakyarthaDependencyTree</a> </td><td><div class="image">
<img src="arch_dependency_vis.png" alt="arch_dependency_vis.png"/>
<div class="caption">
arch_dependency</div></div>
</td></tr>
<tr>
<td><code>ordered_dependency</code> </td><td>arrow based dependency visualization for corpora with dependencies between non terminal nodes </td><td><a class="el" href="classannis_1_1visualizers_1_1component_1_1dependency_1_1ProielRegularDependencyTree.html">ProielRegularDependencyTree</a> </td><td><div class="image">
<img src="ordered_dependency_vis.png" alt="ordered_dependency_vis.png"/>
<div class="caption">
ordered_dependency</div></div>
</td></tr>
<tr>
<td><code>hierarchical_dependency</code> </td><td>unordered vertical tree of dependent tokens </td><td><a class="el" href="classannis_1_1visualizers_1_1component_1_1dependency_1_1ProielDependecyTree.html">ProielDependecyTree</a> </td><td><div class="image">
<img src="hierarchical_dependency_vis.png" alt="hierarchical_dependency_vis.png"/>
<div class="caption">
hierarchical_dependency</div></div>
</td></tr>
<tr>
<td><code>dot_vis</code> </td><td>a debug view of the annotation graph </td><td><a class="el" href="classannis_1_1visualizers_1_1component_1_1graph_1_1DotGraphVisualizer.html">DotGraphVisualizer</a> </td><td><div class="image">
<img src="graph_vis.png" alt="graph_vis.png"/>
<div class="caption">
dot_vis</div></div>
</td></tr>
<tr>
<td><code>video</code> </td><td>a linked video file </td><td><a class="el" href="classannis_1_1visualizers_1_1component_1_1VideoVisualizer.html">VideoVisualizer</a> </td><td><div class="image">
<img src="video.png" alt="video.png"/>
<div class="caption">
video</div></div>
</td></tr>
<tr>
<td><code>audio</code> </td><td>a linked audio file </td><td><a class="el" href="classannis_1_1visualizers_1_1component_1_1AudioVisualizer.html">AudioVisualizer</a> </td><td><div class="image">
<img src="audio.png" alt="audio.png"/>
<div class="caption">
audio</div></div>
</td></tr>
<tr>
<td><code>rst</code> and <code>rst_full</code> </td><td>imitates the RST-diagrams from the <a href="http://www.wagsoft.com/RSTTool/">RST-Tool</a> for a match or complete document</td><td><a class="el" href="classannis_1_1visualizers_1_1component_1_1rst_1_1RST.html">RST</a>/<a class="el" href="classannis_1_1visualizers_1_1component_1_1rst_1_1RSTFull.html">RSTFull</a> </td><td><div class="image">
<img src="rst_vis.png" alt="rst_vis.png"/>
<div class="caption">
rst</div></div>
</td></tr>
</table>
<p>Some ANNIS visualizers require additional software, depending on whether or not they render graphics as an image directly in Java or not. At present, three visualizations require an installation of the freely available software GraphViz (<a href="http://www.graphviz.org/">http://www.graphviz.org/</a>): <a class="el" href="classannis_1_1visualizers_1_1component_1_1dependency_1_1ProielRegularDependencyTree.html">ordered_dependency</a>, <a class="el" href="classannis_1_1visualizers_1_1component_1_1dependency_1_1ProielDependecyTree.html">hierarchical_dependency</a> and the general <a class="el" href="classannis_1_1visualizers_1_1component_1_1graph_1_1DebugVisualizer.html">dot</a> visualization. To use these, install GraphViz on the server (or your local machine for Kickstarter) and make sure it is available in your system path (check this by calling e.g. the program <code>dot</code> on the command line). </p>
</div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="index.html">ANNIS</a></li><li class="navelem"><a class="el" href="admin.html">Administration</a></li>
    <li class="footer">Generated on Tue Jun 18 2013 15:43:58 for ANNIS by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.3.1 </li>
  </ul>
</div>
</body>
</html>
